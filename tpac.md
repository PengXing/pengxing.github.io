

# TPAC Lyon 2018 报告


TPAC Lyon 2018 是一次特殊的 TPAC（Technical Plenary / Advisory Committee），不仅是因为它在这个浪漫美丽的法国城市里昂召开，而且它的参会人数创造了 TPAC 的历史记录，是历年来 TPAC 注册人数最多的一次，达到了 600+，也是中国的参会人员最多的一次。TPAC 汇聚了来自世界各地优秀的人，只在一些文章/书署名的作者和视频中才能见到的人，这次见到了很多。

今年是我第一次参加 TPAC，它是由 W3C 组织召开的，将 W3C 技术小组、董事会（AB）、技术架构组（TAG）和咨询委员会（AC）召集在一起，进行为期一周的技术会议，会议的主要形式是面对面的会议和讨论，这样既能提高讨论的效率，还能蹦出一些新的想法，对于标准的建设和快速推进挺有效的。

W3C 关注的点非常的多，因此也分为众多的 Working Group（WG），这次会议共有 57 个组，在 github.com/w3c 里都可以找到，57 个工作组了包含非常非常前沿的标准，比如 Web Machine Learning、WoT、自动驾驶等，有兴趣的可以关注相关标准的进展。我这次参会的主要目标是 Web Performance WG 以及和体验相关的 WG。

Google Chrome 团队在 WICG 提的 Portals 和 Web Packaging 也在 WG 的会议上有过一些讨论，并且开发人员也演示了 demo，效果非常好，Portals 让在浏览器上实现多页切换动画有了解决方案，在这之前，页与页之间切换只能通过 SPA 或者将下一个页面嵌入 iframe 来实现，SPA 并不是所有场景都适用，而 iframe 方案，其中的痛处只有开发过的人才知道。

性能相关提案还有很多，我特别感兴趣的有 Task worklet，让开发者可以更优雅的执行并行任务，比现在的 Worker 要性能更好，使用更方便，不过还处于非常早期的阶段，能否通过还未可知。Web Performance WG 这次提了非常多的帮助测量性能的提案，毕竟这块之前在浏览器是比较欠缺的，这次的提案有 Input Timing / In-flight Resource Requests / JS Self-profiling / Element Timing for \<img\> 等等，还提出了一个方法来测量页面的稳定性，叫 Layout Stability，通过对比元素前后的位置来计算稳定性，加起来算出整个页面的稳定性，稳定性高的页面一般不会出现首屏闪动。

Web Platform 和 Web Performance 工作组都是先解决现有 ISSUE，后过新的提案。如果仔细观察，会发现这些 ISSUE 的建立时间很多是 2015/2016 年的，时间跨度很大，如果不是早期就在跟进这些 ISSUE，很难跟上讨论的步伐。为什么这些 ISSUE 时间跨度会这么大，可能很多人会认为 W3C 很慢，我觉得这是事实，有很多原因，这些原因只代表了我个人的看法，其一，除了 W3C 组织本身的员工之外，其他都不是全职的，任职于全球各个不同的公司，只能靠 GitHub 或者 WG 自行组织的 F2F 讨论，沟通周期很长，时差也是一个因素；其二，W3C 非常注重安全和隐私，每个提案都必须过这一关，否则是绝对不可能通过的；其三，会有一些大公司之间关于标准的竞争问题；其四，浏览器非常复杂，一个看似很小的改动都很有可能牵扯到其他的 WG。实际上原因可能不止这些。

虽然一个标准从提出到浏览器实现过程比较长，但安全可靠还是第一要素。对于发展很快，甚至有点『浮躁』的中国互联网来说，W3C 的慢节奏似乎有点难以接受，因此出现了小程序和快应用。

这次 TPAC 的 Breakout Sessions 里，华为把快应用（Quick App）的解决方案搬到了 W3C 的舞台上，一开始我并不看好的，因为快应用它不是 Web，并不开放，并且隐私等问题也都是快应用没有解决的，但实际上有点出乎意料，现场讨论非常激烈，并且在 Google 负责 PWA(Progressive Web Apps) 的 Alex Russell 也对快应用非常感兴趣，他表示对中国的互联网一点都不了解，而在这样一个未知且有点浮躁的中国互联网诞生了快应用这样比较新颖的应用形式，对于 Web 来说是好是坏犹未可知。

小程序，我有过一些思考，小程序本身挺好的，体验好，体积小等很多优点。但是目前国内小程序的厂商采用的思路都是利用已有的用户量来圈地盘，看谁的用户多。其他厂商为了降低开发者的成本，都会实现和最大体量的厂商（事实标准）同样的 API，实际上很难做到完全一样，开发者针对不同的平台需要进行不同的适配，时间一长，这代码就没法维护了。而应该和 W3C 一样抱着开放的心态，至少在国内形成一个小程序的标准组织，这样小程序的影响力才会越来越大。能力越大，责任越大，瞩目几家大厂后续的动作。

国内外对隐私的态度也有很大的不同，在国内很多人甚至都不知道隐私包括哪些东西，不只是你的密码、照片才是，搜索记录、位置信息、手机号码等等全都是隐私。而国外的人特别是欧美，对隐私问题有一种『过分』的执拗，这种执拗同样也带到了 W3C，而我非常佩服。中国互联网的发展确实很快，但是不是也要回过头来看看是不是丢了一些东西。

非常感谢 W3C 中国 Team 可爱的人，你们的努力让更多的国内企业能参与到 Web 的建设中来。

